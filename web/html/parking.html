
<!DOCTYPE html>
<html lang="en" style="height: 100%;">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="height=device-height, initial-scale=1">
  <title>Smart Parking</title>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
  <style>
  .animate__animated.animate__fadeIn {
    --animate-duration: 3s;
  }
  body {
    background: linear-gradient(-45deg, #c90076, #8e7cc3, #23a6d5, #23d5ab);
    background-size: 700% 700%;
    animation: gradient 60s ease infinite;
    height: auto;
  }
  @keyframes gradient {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
  }
  </style>
</head>
<body style="margin-top: 100px;">
  <div class="d-flex flex-column justify-content-center">
    <div class="d-flex flex-column justify-content-center align-items-center" style="display: flex;flex-direction: column;justify-content: center;text-align: center;">
      <h1 style='font-size:60px;' class="fw-light text-white m-0 animate__animated animate__fadeIn">Deck 300</h1>
      <br><br>
      <div class="container-fluid">
        <h1 style='font-size:40px;' class="fw-light text-white m-0 animate__animated animate__fadeIn">Level 1</h1>
        <div class="row">
          <div class="col" style="text-align: center; display: inline;">
            <div style="display: inline;">
              <h1 style="display: inline;" class="fw-light text-white m-0 animate__animated animate__fadeIn">STD: </h1>
              <h1 style='font-size:40px;display: inline;' class="fw-light text-white m-0 animate__animated animate__fadeIn" id="stdTarget">Loading...</h1>
              <br>
              <h1 style="display: inline;" class="fw-light text-white m-0 animate__animated animate__fadeIn">ADA: </h1>
              <h1 style='font-size:40px;display: inline;' class="fw-light text-white m-0 animate__animated animate__fadeIn" id="adaTarget">Loading...</h1>
              <br>
              <h1 style="display: inline;" class="fw-light text-white m-0 animate__animated animate__fadeIn">EV: </h1>
              <h1 style='font-size:40px;display: inline;' class="fw-light text-white m-0 animate__animated animate__fadeIn" id="evTarget">Loading...</h1>
            </div>
          </div>
        </div>
        <br><br>
        <h1 style='font-size:40px;' class="fw-light text-white m-0 animate__animated animate__fadeIn">Level 2</h1>
        <div class="row">
          <div class="col" style="text-align: center; display: inline;">
            <div style="display: inline;">
              <h1 style="display: inline;" class="fw-light text-white m-0 animate__animated animate__fadeIn">STD: </h1>
              <h1 style='font-size:40px;display: inline;' class="fw-light text-white m-0 animate__animated animate__fadeIn" id="stdTarget2">Loading...</h1>
              <br>
              <h1 style="display: inline;" class="fw-light text-white m-0 animate__animated animate__fadeIn">ADA: </h1>
              <h1 style='font-size:40px;display: inline;' class="fw-light text-white m-0 animate__animated animate__fadeIn" id="adaTarget2">Loading...</h1>
              <br>
              <h1 style="display: inline;" class="fw-light text-white m-0 animate__animated animate__fadeIn">EV: </h1>
              <h1 style='font-size:40px;display: inline;' class="fw-light text-white m-0 animate__animated animate__fadeIn" id="evTarget2">Loading...</h1>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <script>
  window.onload = function() {
    const today = new Date();
    const yyyy = today.getFullYear();
    let mm = today.getMonth() + 1; // Months start at 0!
    let dd = today.getDate();

    if (dd < 10) dd = '0' + dd;
    if (mm < 10) mm = '0' + mm;

    var formattedDate = yyyy + '-' + mm + '-' + dd;

    //floor 1
    var req = new XMLHttpRequest();
    req.open('GET','/currentCount?deck=300&floor=1&type=standard&date=' + formattedDate);
    req.send();
    req.onload = (response) => {
      console.log(response);
      document.getElementById('stdTarget').innerHTML = response.srcElement.response;
    }
    req = new XMLHttpRequest();
    req.open('GET','/currentCount?deck=300&floor=1&type=ada&date=' + formattedDate);
    req.send();
    req.onload = (response) => {
      console.log(response);
      document.getElementById('adaTarget').innerHTML = response.srcElement.response;
    }
    req = new XMLHttpRequest();
    req.open('GET','/currentCount?deck=300&floor=1&type=ev&date=' + formattedDate);
    req.send();
    req.onload = (response) => {
      console.log(response);
      document.getElementById('evTarget').innerHTML = response.srcElement.response;
    }
    //floor 2
    var req = new XMLHttpRequest();
    req.open('GET','/currentCount?deck=300&floor=2&type=standard&date=' + formattedDate);
    req.send();
    req.onload = (response) => {
      console.log(response);
      document.getElementById('stdTarget2').innerHTML = response.srcElement.response;
    }
    req = new XMLHttpRequest();
    req.open('GET','/currentCount?deck=300&floor=2&type=ada&date=' + formattedDate);
    req.send();
    req.onload = (response) => {
      console.log(response);
      document.getElementById('adaTarget2').innerHTML = response.srcElement.response;
    }
    req = new XMLHttpRequest();
    req.open('GET','/currentCount?deck=300&floor=2&type=ev&date=' + formattedDate);
    req.send();
    req.onload = (response) => {
      console.log(response);
      document.getElementById('evTarget2').innerHTML = response.srcElement.response;
    }
    setInterval(function() {
      const today = new Date();
      const yyyy = today.getFullYear();
      let mm = today.getMonth() + 1; // Months start at 0!
      let dd = today.getDate();

      if (dd < 10) dd = '0' + dd;
      if (mm < 10) mm = '0' + mm;

      //floor 1
      var formattedDate = yyyy + '-' + mm + '-' + dd;
      var req = new XMLHttpRequest();
      req.open('GET','/currentCount?deck=300&floor=1&type=standard&date=' + formattedDate);
      req.send();
      req.onload = (response) => {
        console.log(response);
        document.getElementById('stdTarget').innerHTML = response.srcElement.response;
      }
      req = new XMLHttpRequest();
      req.open('GET','/currentCount?deck=300&floor=1&type=ada&date=' + formattedDate);
      req.send();
      req.onload = (response) => {
        console.log(response);
        document.getElementById('adaTarget').innerHTML = response.srcElement.response;
      }
      req = new XMLHttpRequest();
      req.open('GET','/currentCount?deck=300&floor=1&type=ev&date=' + formattedDate);
      req.send();
      req.onload = (response) => {
        console.log(response);
        document.getElementById('evTarget').innerHTML = response.srcElement.response;
      }
      //floor 2
      var req = new XMLHttpRequest();
      req.open('GET','/currentCount?deck=300&floor=2&type=standard&date=' + formattedDate);
      req.send();
      req.onload = (response) => {
        console.log(response);
        document.getElementById('stdTarget2').innerHTML = response.srcElement.response;
      }
      req = new XMLHttpRequest();
      req.open('GET','/currentCount?deck=300&floor=2&type=ada&date=' + formattedDate);
      req.send();
      req.onload = (response) => {
        console.log(response);
        document.getElementById('adaTarget2').innerHTML = response.srcElement.response;
      }
      req = new XMLHttpRequest();
      req.open('GET','/currentCount?deck=300&floor=2&type=ev&date=' + formattedDate);
      req.send();
      req.onload = (response) => {
        console.log(response);
        document.getElementById('evTarget2').innerHTML = response.srcElement.response;
      }
    }, 30000);
  }
  </script>
</body>
</html>
